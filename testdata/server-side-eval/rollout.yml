---
name: percentage rollout

constants:
  IS_MATCH:
    value: true
    variationIndex: 0
    reason: { kind: "RULE_MATCH", ruleIndex: 0, ruleId: "ruleid" }
  IS_NOT_MATCH:
    value: false
    variationIndex: 1
    reason: { kind: "FALLTHROUGH" }

sdkData:
  flags:
    flag-with-empty-fallthrough-rollout:
      on: true
      variations: [ true, false ]
      offVariation: 1
      fallthrough:
        rollout:
          variations: []

evaluations:
  - name: fallthrough rollout - error for empty variations list
    flagKey: flag-with-empty-fallthrough-rollout
    user: { key: "user-key" }
    default: false
    expect:
      value: false
      reason: { "kind": "ERROR", "errorKind": "MALFORMED_FLAG" }
