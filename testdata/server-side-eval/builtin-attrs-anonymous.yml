---
name: built-in attributes - anonymous

constants:
  IS_MATCH:
    value: true
    variationIndex: 0
    reason: { kind: "RULE_MATCH", ruleIndex: 0, ruleId: "ruleid" }
  IS_NOT_MATCH:
    value: false
    variationIndex: 1
    reason: { kind: "FALLTHROUGH" }

sdkData:
  flags:
    test-flag-for-anonymous:
      on: true
      fallthrough: { variation: 1 }
      variations: [ true, false ]
      rules:
        - id: ruleid
          variation: 0
          clauses:
            - { attribute: anonymous, op: in, values: [ true ] }

evaluations:
  - name: anonymous matches clause
    flagKey: test-flag-for-anonymous
    user: { key: "user-key", anonymous: true }
    default: false
    expect: <IS_MATCH>

  - name: anonymous does not match clause
    flagKey: test-flag-for-anonymous
    user: { key: "user-key", anonymous: false }
    default: false
    expect: <IS_NOT_MATCH>

  - name: anonymous does not match clause - unset
    flagKey: test-flag-for-anonymous
    user: { key: "user-key"}
    default: false
    expect: <IS_NOT_MATCH>
