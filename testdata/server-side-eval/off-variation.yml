---
name: evaluate flag with targeting off

constants:
  USER: { key: "user-key" }

parameters:
  - TYPE_NAME: bool
    TYPE_VALUE_1: false
    TYPE_VALUE_2: true
    TYPE_DEFAULT: false

  - TYPE_NAME: int
    TYPE_VALUE_1: 1
    TYPE_VALUE_2: 2
    TYPE_DEFAULT: -1

  - TYPE_NAME: float
    TYPE_VALUE_1: 1.5
    TYPE_VALUE_2: 3.5
    TYPE_DEFAULT: 0.5

  - TYPE_NAME: string
    TYPE_VALUE_1: "a"
    TYPE_VALUE_2: "b"
    TYPE_DEFAULT: "x"

  - TYPE_NAME: any
    TYPE_VALUE_1: 3
    TYPE_VALUE_2: "x"
    TYPE_DEFAULT: false

sdkData:
  flags:
    off-flag-<TYPE_NAME>:
      on: false
      offVariation: 1
      variations: [ <TYPE_VALUE_1>, <TYPE_VALUE_2> ]

    off-flag-with-undefined-off-variation-<TYPE_NAME>:
      on: false
      offVariation: null
      variations: [ <TYPE_VALUE_1>, <TYPE_VALUE_2> ]

evaluations:
  - flagKey: off-flag-<TYPE_NAME>
    user: <USER>
    valueType: <TYPE_NAME>
    default: <TYPE_DEFAULT>
    expect:
      value: <TYPE_VALUE_2>
      variationIndex: 1
      reason: { kind: "OFF" }

  - flagKey: off-flag-with-undefined-off-variation-<TYPE_NAME>
    user: <USER>
    valueType: <TYPE_NAME>
    default: <TYPE_DEFAULT>
    expect:
      value: <TYPE_DEFAULT>
      reason: { kind: "OFF" }
