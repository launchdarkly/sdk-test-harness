---
name: built-in attributes - general (<ATTR_NAME>)

constants:
  IS_MATCH:
    value: true
    variationIndex: 0
    reason: { kind: "RULE_MATCH", ruleIndex: 0, ruleId: "ruleid" }
  IS_NOT_MATCH:
    value: false
    variationIndex: 1
    reason: { kind: "FALLTHROUGH" }

parameters:
  - ATTR_NAME: name
  - ATTR_NAME: email
  - ATTR_NAME: firstName
  - ATTR_NAME: lastName
  - ATTR_NAME: country
  - ATTR_NAME: avatar

sdkData:
  flags:
    test-flag:
      on: true
      fallthrough: { variation: 1 }
      variations: [ true, false ]
      rules:
        - id: ruleid
          variation: 0
          clauses:
            - attribute: <ATTR_NAME>
              op: in
              values: [ "right-value" ]

evaluations:
  - name: built-in attribute value matches clause
    flagKey: test-flag
    context: { key: "user-key", <ATTR_NAME>: "right-value" }
    default: false
    expect: <IS_MATCH>

  - name: built-in attribute does not match clause - wrong value
    flagKey: test-flag
    context: { key: "user-key", <ATTR_NAME>: "wrong-value" }
    default: false
    expect: <IS_NOT_MATCH>

  - name: built-in attribute does not match clause - not set
    flagKey: test-flag
    context: { key: "user-key" }
    default: false
    expect: <IS_NOT_MATCH>
